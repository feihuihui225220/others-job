<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<title></title>
<link rel="stylesheet" href="css/common.css" />
<link rel="stylesheet" href="css/reg.css" />
<link rel="stylesheet" href="css/shequyonghu.css" />
<link rel="stylesheet" href="css/yonghuguanli.css" />
<script src="js/jquery-1.8.0.min.js"></script>
</head>
<body>

<div class="wrapper">
    <div class="header">
        <span class="logo">老年服务平台</span>
        <p>欢迎您，社区工作者<a href="">修改密码</a><a href="">注销</a></p>
        <ul><!-- 最后一个li 有class=act -->
            <li class="act"><a href="">用户管理</a></li>
            <li><a href="">CareManager管理</a></li>
            <li><a href="">元服务管理</a></li>
            <li><a href="">专业服务管理</a></li>
            <li><a href="">关爱服务管理</a></li>
            <li><a href="">评估量表管理</a></li>
            <li><a href="">政策管理</a></li>
            <li><a href="">设备管理</a></li>
            <li><a href="">知识库管理</a></li>
            <li class="last"><a href="">分类管理</a></li>
        </ul>
    </div>
    <form method="post" action="" class="reg_area fix_pop" style="width:800px">
        <h2>添加试题</h2>   
        <div class="limitbox limitbox3 pad10">
            <ul class="inpubox clearfix">
                <li><label>试题内容：</label><textarea cols="90" rows="5"></textarea></li>
                <li><label>图片上传：</label>
                    <input type="file" />
                    <span class="file_name"></span>
                </li>
            </ul>
            <div class="admin_cate_opt">
                <button class="btn btn2" type="button">增加选项</button>
            </div>
            <table class="tb table_col4">
                <col class="col1"/><col class="col2"/><col class="col3"/><col class="col4"/>
                <tr>
                    <th>序号</th>
                    <th>选项内容</th>
                    <th>选项分数</th>
                    <th>操作</th>
                </tr>
            </table>
        </div>
        <p class="opt"><a href="" class="btn">取 消</a><button type="submit" class="btn">添 加</button></p>
    </form>
    <div class="footer">
        
    </div>
</div>

<script>

$(function(){

    $('.btn2').click(function () {
        if ($('.table_col4 tr').length > 7) return;
        $('.table_col4').append('<tr><td>'+'ABCDEFG'.charAt($('.table_col4 tr').length-1)+'</td><td><input /></td><td><input /></td><td><span class="tb_remove2">删除</span><input type="hidden"/></td></tr>');
        $('.table_col4 input').each(function (index, domEle) {
            console.log($(this).parent().parent())
            switch (index % 3) {
                case 0 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].score');
                    break;
                case 1 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].content');
                    break;
                case 2 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].code');
                    $(this).attr('value', $(this).parent().parent().find('td:eq(0)').html());
                    break;
            }
        });
    });

    $('.tb_remove2').live('click', function () {
        $(this).parent().parent().remove();
        $('.table_col4 tr').find('td:eq(0)').each(function (index, domEle) {
            $(domEle).html('ABCDEFG'.charAt(index));
        });
        $('.table_col4 input').each(function (index, domEle) {
            switch (index % 3) {
                case 0 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].score');
                    break;
                case 1 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].content');
                    break;
                case 2 :
                    $(this).attr('name', 'answers['+($(this).parent().parent().index()-1)+'].code');
                    $(this).attr('value', $(this).parent().parent().find('td:eq(0)').html());
                    break;
            }
        });
    });

});
</script>
</body>
</html>